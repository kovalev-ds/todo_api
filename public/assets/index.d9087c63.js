var e=Object.defineProperty,t=Object.prototype.hasOwnProperty,a=Object.getOwnPropertySymbols,n=Object.prototype.propertyIsEnumerable,l=(t,a,n)=>a in t?e(t,a,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[a]=n,r=(e,r)=>{for(var s in r||(r={}))t.call(r,s)&&l(e,s,r[s]);if(a)for(var s of a(r))n.call(r,s)&&l(e,s,r[s]);return e};import{c as s,a as c,b as o,t as i,C as m,u as d,d as u,e as p,f as E,G as f,g as y,h as v,i as h,j as x,k as b,N as g,l as N,m as w,S as k,R as A,n as T,P as _,B as C}from"./vendor.35eee202.js";!function(e=".",t="__import__"){try{self[t]=new Function("u","return import(u)")}catch(a){const n=new URL(e,location),l=e=>{URL.revokeObjectURL(e.src),e.remove()};self[t]=e=>new Promise(((a,r)=>{const s=new URL(e,n);if(self[t].moduleMap[s])return a(self[t].moduleMap[s]);const c=new Blob([`import * as m from '${s}';`,`${t}.moduleMap['${s}']=m;`],{type:"text/javascript"}),o=Object.assign(document.createElement("script"),{type:"module",src:URL.createObjectURL(c),onerror(){r(new Error(`Failed to import: ${e}`)),l(o)},onload(){a(self[t].moduleMap[s]),l(o)}});document.head.appendChild(o)})),self[t].moduleMap={}}}("/assets/");const F=[],R={id:null,title:"",description:"",isActive:!1,isEditing:!1};const L=c(s({tasks:(e=F,t)=>{const{type:a,payload:n}=t;switch(a){case"CREATE_TASK":return[...e,n];case"UPDATE_TASK":return e.map((e=>e.id===n.id?r(r({},e),n.data):e));case"FETCH_TASK":return e.find((e=>e.id===n.id));case"FETCH_ALL_TASKS":return n;case"DELETE_TASK":return e.filter((({id:e})=>e!==n.id));default:return e}},form:(e=R,t)=>{const{type:a,payload:n,field:l}=t;switch(a){case"HANDLE_CHANGE":return r(r({},e),{[l]:n});case"FORM_TOGGLER":return r(r({},e),{isActive:!e.isActive});case"RESET_FORM":return R;case"EDIT_FORM":return r(r(r({},e),{isEditing:!0,isActive:!0}),n);default:return e}}}),{},o(...[i]));const S=m.create({baseURL:"/api",headers:{"Content-type":"application/json"}}),O=()=>S.get("/tasks"),j=e=>S.post("/tasks",e),M=(e,t)=>S.put(`/tasks/${e}`,t),D=e=>S.delete(`/tasks/${e}`),P=(e,t)=>async a=>{try{const n=await M(e,t);if(204!==n.status)return;return a({type:"UPDATE_TASK",payload:{id:e,data:t}}),Promise.resolve(n.data)}catch(n){return Promise.reject(n)}},K=e=>{const t=d(),a=u(),{task:n}=e,{completed:l,id:r,title:s}=n;return p.createElement("li",{className:"h-12 px-6 shadow-sm bg-white flex items-center relative"},p.createElement("input",{className:"p-2.5 rounded border-none bg-[#e8e8e8]",type:"checkbox",name:"completed",checked:l,onChange:()=>t(P(r,{completed:!l}))}),p.createElement("div",{className:E("flex-1 px-4 text-gray-900",l&&"line-through")},s),p.createElement("div",{className:"flex items-center h-full -mx-4 group"},p.createElement("button",{className:"btn-icon hidden group-hover:inline-flex",onClick:()=>t((e=>async t=>{try{await D(e),t({type:"DELETE_TASK",payload:{id:e}})}catch(a){console.log(a)}})(r))},p.createElement(f,null)),p.createElement("button",{onClick:()=>t({type:"EDIT_FORM",payload:n}),className:"btn-icon hidden group-hover:inline-flex"},p.createElement(y,null)),p.createElement("button",{onClick:()=>{a.push(`/tasks/${r}`)},className:"btn-icon hidden group-hover:inline-flex"},p.createElement(v,null)),p.createElement("button",{className:"btn-icon inline-flex group-hover:hidden"},p.createElement(h,null))))},U=()=>{const e=x((e=>e.tasks)),t=d(),{filter:a}=b();return p.useEffect((()=>t((async e=>{try{e({type:"FETCH_ALL_TASKS",payload:(await O()).data})}catch(t){console.log(t)}}))),[]),p.createElement("ul",{className:"space-y-1.5 bg-[#F6F8F9] py-2"},e.filter((({completed:e})=>"active"===a?!e:"completed"!==a||e)).map((e=>p.createElement(K,{key:e.id,task:e}))))},G=()=>{const e=x((e=>e.tasks.filter((e=>!e.completed)).length))||0;return p.createElement("div",{className:"text-sm"},e>1?e+" tasks left.":e+" task left.")},B=()=>p.createElement("ul",{className:"flex items-center space-x-1 -mx-4"},p.createElement("li",null,p.createElement(g,{to:"/",exact:!0,activeClassName:"nav-active",className:"nav"},"all")),p.createElement("li",null,p.createElement(g,{to:"/active",activeClassName:"nav-active",className:"nav"},"active")),p.createElement("li",null,p.createElement(g,{to:"/completed",activeClassName:"nav-active",className:"nav"},"completed"))),H=()=>{const e=d(),{id:t,title:a,description:n,isActive:l,isEditing:r}=x((({form:e})=>e));p.useEffect((()=>{const t=t=>{27===t.keyCode&&e({type:"RESET_FORM"})};return window.addEventListener("keydown",t),()=>{window.removeEventListener("keydown",t)}}),[]);const s=t=>{const{name:a,value:n}=t.target;e(((e,t)=>({type:"HANDLE_CHANGE",field:e,payload:t}))(a,n))};return p.createElement("form",{onSubmit:l=>{l.preventDefault(),a&&(e(r?P(t,{title:a,description:n}):(({title:e,description:t})=>async a=>{try{const n=await j({title:e,description:t});return a({type:"CREATE_TASK",payload:n.data}),Promise.resolve(n.data)}catch(n){return Promise.reject(n)}})({title:a,description:n})),e({type:"RESET_FORM"}))},className:"mb-4"},p.createElement("div",{className:"flex flex-col relative space-y-1"},p.createElement("input",{id:"title",name:"title",onChange:s,value:a,className:E("h-14 px-6 bg-[#F6F8F9] placeholder-[#616770] border-none","focus:ring-0 focus:outline-none focus:shadow"),type:"text",placeholder:"What needs to be done?",autoComplete:"off"}),p.createElement("button",{onClick:()=>e({type:"FORM_TOGGLER"}),type:"button",className:E("absolute inset-y-0 right-0 w-12 inline-flex items-center justify-center","focus:outline-none focus:ring-0")},l?p.createElement(N,null):p.createElement(w,null))),p.createElement("div",{className:E(l?"flex flex-col":"hidden","space-y-3")},p.createElement("textarea",{id:"description",name:"description",className:E("bg-[#f8f4e8] placeholder-[#B39D43] px-6 border-none   resize-none","focus:shadow focus:outline-none focus:ring-0"),placeholder:"Describe your task",onChange:s,value:n,rows:"4"}),p.createElement("button",{type:"submit",className:E("self-end px-4 py-1.5 mr-2 rounded-lg bg-[#008EFE] text-gray-100 transition-colors","hover:bg-[#0080E2] focus:outline-none focus:ring-2 focus:ring-[#AFD0EB]")},r?"Save":"Add task")))},$=()=>p.createElement(p.Fragment,null,p.createElement("header",null,p.createElement("h1",{className:"text-4xl text-gray-900 tracking-wider px-6 pt-8"},"todo app"),p.createElement("div",{className:"px-6 py-2 flex justify-between items-center"},p.createElement(G,null),p.createElement(B,null)),p.createElement(H,null)),p.createElement("main",{className:"flex-1 overflow-auto"},p.createElement(U,null))),I=()=>{const e=b(),t=x((t=>t.tasks.find((t=>t.id===parseInt(e.id)))));if(!t)return p.createElement("div",{className:"px-6"},"Task with id: ",e.id," not found");const{title:a,description:n,completed:l,updatedAt:r}=t;return p.createElement("div",{className:"px-6"},p.createElement("div",null,"task: ",p.createElement("span",{className:"font-bold"},a)," "),n&&p.createElement("div",null,"description: ",p.createElement("span",{className:"italic"},n)," "),p.createElement("div",null,"status:"," ",l?p.createElement("span",{className:"text-green-500"},"completed"):p.createElement("span",{className:"text-red-500"},"in process")))},z=e=>{const{history:t}=e;return p.createElement(p.Fragment,null,p.createElement("header",{className:"px-6 py-8 flex justify-between items-center"},p.createElement("h1",{className:"text-4xl text-gray-900 tracking-wider"},"todo app"),p.createElement("button",{className:"px-4 py-1.5 rounded-lg bg-[#19181b] text-gray-100 transition-colors",onClick:()=>{t.goBack()}},"Go Back")),p.createElement("main",{className:"flex-1 overflow-auto"},p.createElement(I,null)))},W=()=>p.createElement("section",{className:"max-w-md w-full flex flex-col h-[80vh] rounded-md overflow-hidden bg-white"},p.createElement(k,null,p.createElement(A,{path:["/","/:filter"],exact:!0,component:$}),p.createElement(A,{path:"/tasks/:id",component:z})));function q(){return p.createElement("section",{className:"flex flex-col items-center pt-10"},p.createElement(W,null))}T.render(p.createElement(p.StrictMode,null,p.createElement(_,{store:L},p.createElement(C,null,p.createElement(q,null)))),document.getElementById("root"));
